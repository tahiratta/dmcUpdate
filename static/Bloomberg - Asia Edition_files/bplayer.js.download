require=function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";t.exports=function(e,t,r){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,r);if("function"!=typeof t)throw new TypeError("predicate must be a function");var n=Object(e),i=n.length;if(0===i)return-1;for(var o=0;o<i;o++)if(t.call(r,n[o],o,n))return o;return-1}},{}],2:[function(e,t,r){"use strict";function n(e){i(e),this.options=e}function i(e){var t;if(!e)throw new Error("options is required.");for(var r=0;r<l.length;r++)if(t=l[r],!e.hasOwnProperty(t))throw new Error("options."+t+" is required.");if(e.percentage>100||e.percentage<0)throw new Error("options.percentage range should be from 0 to 100.");if(0===e.buckets.length)throw new Error("options.buckets should have at least one bucket.")}function o(e){return new Date>e}function a(e,t){return u.parse(e.get(t))}function s(e,t){var r=u.random().toValue();e.set(t,r)}var u=e("./TestValue"),l=["name","expires","percentage","buckets","storage"],c="abt-";n.prototype={options:null,initialize:function(){var e,t=this.options.storage,r=this.getTestName();return o(this.options.expires)?void t.del(r):(e=a(t,r))?void t.set(r,e.toValue()):void s(t,r)},isBucketed:function(){var e=a(this.options.storage,this.getTestName());return!!e},getBucket:function(){var e=a(this.options.storage,this.getTestName());return e?e.getBucket(this.options.percentage,this.options.buckets):null},setBucket:function(e){var t=u.generateValueInBucket(this.options.percentage,this.options.buckets,e);this.options.storage.set(this.getTestName(),t.toValue())},forceOutOfBuckets:function(){var e=u.generateValueOutOfBuckets(this.options.percentage);this.options.storage.set(this.getTestName(),e.toValue())},getTestName:function(){return c+this.options.name}},t.exports=n},{"./TestValue":5}],3:[function(e,t,r){"use strict";function n(e){e&&(this.abTests=i(e))}function i(e){for(var t,r,n,i=Object.keys(e),u={},l=0;l<i.length;l++)n=i[l],t=e[n],r=new a(t.storageType||s,t),u[n]=new o({name:n,expires:t.expires,percentage:t.percentage,buckets:t.buckets,storage:r});return u}var o=e("./ABTest"),a=e("./Storage"),s="localStorage";n.prototype={abTests:null,initialize:function(){for(var e=Object.keys(this.abTests),t=0;t<e.length;t++)this.abTests[e[t]].initialize()},getABTest:function(e){return this.abTests[e]}},t.exports=n},{"./ABTest":2,"./Storage":4}],4:[function(e,t,r){"use strict";function n(e,t){if(this.options=t||{},this.storage=s[e],this.isCookieStorage="cookie"===e,!this.storage)throw new Error("Invalid storageType")}function i(e){return e.path||"/"}function o(e){return e.domain||window.location.hostname}function a(){return new Date((new Date).getTime()+u)}var s={cookie:e("./storage/Cookie"),localStorage:e("./storage/LocalStorage")},u=2592e6;n.prototype={options:null,storage:null,isCookieStorage:null,get:function(e){return this.storage.get(e)},set:function(e,t){return this.isCookieStorage?void this.storage.set(e,t,a(),i(this.options),o(this.options)):void this.storage.set(e,t)},del:function(e){return this.isCookieStorage?void this.storage.del(e,i(this.options),o(this.options)):void this.storage.del(e)}},t.exports=n},{"./storage/Cookie":6,"./storage/LocalStorage":7}],5:[function(e,t,r){"use strict";function n(e,t){this.scopedPercentageValue=e,this.scopedBucketValue=t}function i(e){return Math.floor(Math.random()*e)}function o(e,t,r){return e>=t&&e<r}function a(e,t){var r=100*e/l;return r<t}function s(e,t){var r=Math.floor(e*t.length/c);return t[r]}var u="|",l=1e3,c=1e3;n.prototype={scopedPercentageValue:null,scopedBucketValue:null,getBucket:function(e,t){return a(this.scopedPercentageValue,e)?s(this.scopedBucketValue,t):null},toValue:function(){return this.scopedPercentageValue+u+this.scopedBucketValue}},n.generateValueInBucket=function(e,t,r){var i,o=Math.floor(e*l/100),a=t.indexOf(r);if(a<0)throw new Error("bucket value: "+r+" not found in buckets");return o=o>=0?o-1:o,i=Math.floor((a+1)*c/t.length),i=i>=0?i-1:i,new n(o,i)},n.generateValueOutOfBuckets=function(e){var t;if(e>=100)throw new Error("You can't force user out of bucket when percentage >= 100.");return t=l-1,new n(t,1)},n.random=function(){return new n(i(l),i(c))},n.parse=function(e){var t,r,i;return e?(t=e.split(u),r=parseInt(t[0],10),i=parseInt(t[1],10),isNaN(r)||isNaN(i)?null:o(r,0,l)&&o(i,0,c)?new n(r,i):null):null},t.exports=n},{}],6:[function(e,t,r){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var i={get:function(e){var t=document.cookie.match("(^|;) ?"+n(e)+"=([^;$]*)");return t?t[2]:null},set:function(e,t,r,n,i){var o=r?"; expires="+r.toGMTString():"",a=n?"; path="+n:"; path=/",s=i?"; domain="+i:"";document.cookie=e+"="+t+o+a+s},del:function(e,t,r){this.set(e,"",new Date(-1),t,r)}};t.exports=i},{}],7:[function(e,t,r){"use strict";function n(){try{return i in window&&window[i]}catch(e){return null}}var i="localStorage",o={get:function(e){var t=n();return t?t.getItem(e):null},set:function(e,t){var r=n();r&&r.setItem(e,t)},del:function(e){var t=n();t&&t.removeItem(e)}};t.exports=o},{}],8:[function(e,t,r){"use strict";var n,i=e("es5-ext/object/assign"),o=e("es5-ext/object/normalize-options"),a=e("es5-ext/object/is-callable"),s=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var r,n,a,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(r=a=!0,n=!1):(r=s.call(e,"c"),n=s.call(e,"e"),a=s.call(e,"w")),l={value:t,configurable:r,enumerable:n,writable:a},u?i(o(u),l):l},n.gs=function(e,t,r){var n,u,l,c;return"string"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==r?r=void 0:a(r)||(l=r,r=void 0):(l=t,t=r=void 0),null==e?(n=!0,u=!1):(n=s.call(e,"c"),u=s.call(e,"e")),c={get:t,set:r,configurable:n,enumerable:u},l?i(o(l),c):c}},{"es5-ext/object/assign":10,"es5-ext/object/is-callable":13,"es5-ext/object/normalize-options":17,"es5-ext/string/#/contains":19}],9:[function(e,t,r){"use strict";t.exports=new Function("return this")()},{}],10:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":11,"./shim":12}],11:[function(e,t,r){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],12:[function(e,t,r){"use strict";var n=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var r,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},{"../keys":14,"../valid-value":18}],13:[function(e,t,r){"use strict";t.exports=function(e){return"function"==typeof e}},{}],14:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":15,"./shim":16}],15:[function(e,t,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],16:[function(e,t,r){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],17:[function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=i(null);return n.call(arguments,function(e){null!=e&&o(Object(e),t)}),t}},{}],18:[function(e,t,r){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],19:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":20,"./shim":21}],20:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(n.contains("dwa")===!0&&n.contains("foo")===!1)}},{}],21:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],22:[function(e,t,r){"use strict";function n(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var u=o[a],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(r[u]=i[u])}}return r}function i(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}t.exports={assign:n,polyfill:i}},{}],23:[function(e,t,r){(function(n,i){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.ES6Promise=n()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function o(e){W=e}function a(e){$=e}function s(){return function(){return n.nextTick(d)}}function u(){return"undefined"!=typeof Q?function(){Q(d)}:f()}function l(){var e=0,t=new Z(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}K=0}function p(){try{var t=e,r=t("vertx");return Q=r.runOnLoop||r.runOnContext,u()}catch(e){return f()}}function h(e,t){var r=arguments,n=this,i=new this.constructor(v);void 0===i[ie]&&x(i);var o=n._state;return o?!function(){var e=r[o-1];$(function(){return C(o,i,e,n._result)})}():k(n,i,e,t),i}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return S(r,e),r}function v(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function _(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function w(e,t,r){$(function(e){var n=!1,i=_(r,t,function(r){n||(n=!0,t!==r?S(e,r):A(e,r))},function(t){n||(n=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,T(e,i))},e)}function E(e,t){t._state===ae?A(e,t._result):t._state===se?T(e,t._result):k(t,void 0,function(t){return S(e,t)},function(t){return T(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===y?E(e,t):n===ue?T(e,ue.error):void 0===n?A(e,t):r(n)?w(e,t,n):A(e,t)}function S(e,r){e===r?T(e,b()):t(r)?O(e,r,m(r)):A(e,r)}function P(e){e._onerror&&e._onerror(e._result),I(e)}function A(e,t){e._state===oe&&(e._result=t,e._state=ae,0!==e._subscribers.length&&$(I,e))}function T(e,t){e._state===oe&&(e._state=se,e._result=t,$(P,e))}function k(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ae]=r,i[o+se]=n,0===o&&e._state&&$(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?C(r,n,i,o):i(o);e._subscribers.length=0}}function j(){this.error=null}function R(e,t){try{return e(t)}catch(e){return le.error=e,le}}function C(e,t,n,i){var o=r(n),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=R(n,i),a===le?(l=!0,s=a.error,a=null):u=!0,t===a)return void T(t,g())}else a=i,u=!0;t._state!==oe||(o&&u?S(t,a):l?T(t,s):e===ae?A(t,a):e===se&&T(t,a))}function L(e,t){try{t(function(t){S(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}function D(){return ce++}function x(e){e[ie]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ie]||x(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,N())}function N(){return new Error("Array Methods must be provided an Array")}function V(e){return new M(this,e).promise}function U(e){var t=this;return new t(Y(e)?function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,r=new t(v);return T(r,e),r}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ie]=D(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&B(),this instanceof z?L(this,e):G())}function H(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var q=void 0;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=q,K=0,Q=void 0,W=void 0,$=function(e,t){re[K]=e,re[K+1]=t,K+=2,2===K&&(W?W(d):ne())},J="undefined"!=typeof window?window:void 0,X=J||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?s():Z?l():te?c():void 0===J&&"function"==typeof e?p():f();var ie=Math.random().toString(36).substring(16),oe=void 0,ae=1,se=2,ue=new j,le=new j,ce=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===oe&&r<e;r++)this._eachEntry(t[r],r)},M.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===y){var i=m(e);if(i===h&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===z){var o=new r(v);O(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},M.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===oe&&(this._remaining--,e===se?T(n,r):this._result[t]=r),0===this._remaining&&A(n,this._result)},M.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(ae,t,e)},function(e){return r._settledAt(se,t,e)})},z.all=V,z.race=U,z.resolve=y,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=$,z.prototype={constructor:z,then:h,catch:function(e){return this.then(null,e)}},z.polyfill=H,z.Promise=z,z})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],24:[function(e,t,r){"use strict";e("./is-implemented")()||Object.defineProperty(e("es5-ext/global"),"Symbol",{value:e("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":25,"./polyfill":27,"es5-ext/global":9}],25:[function(e,t,r){"use strict";var n={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},{}],26:[function(e,t,r){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],27:[function(e,t,r){"use strict";var n,i,o,a,s=e("d"),u=e("./validate-symbol"),l=Object.create,c=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,p=l(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var r,n,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,r="@@"+t,f(d,r,s.gs(null,function(e){n||(n=!0,f(this,r,s(e)),n=!1)})),r}}();o=function(e){if(this instanceof o)throw new TypeError("TypeError: Symbol is not a constructor");return i(e)},t.exports=i=function e(t){var r;if(this instanceof e)throw new TypeError("TypeError: Symbol is not a constructor");return a?n(t):(r=l(o.prototype),t=void 0===t?"":String(t),c(r,{__description__:s("",t),__name__:s("",h(t))}))},c(i,{for:s(function(e){return p[e]?p[e]:p[e]=i(String(e))}),keyFor:s(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:s("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",n&&n.iterator||i("iterator")),match:s("",n&&n.match||i("match")),replace:s("",n&&n.replace||i("replace")),search:s("",n&&n.search||i("search")),species:s("",n&&n.species||i("species")),split:s("",n&&n.split||i("split")),toPrimitive:s("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:s("",n&&n.toStringTag||i("toStringTag")),unscopables:s("",n&&n.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),f(i.prototype,i.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),f(i.prototype,i.toStringTag,s("c","Symbol")),f(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),f(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},{"./validate-symbol":28,d:8}],28:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":26}],29:[function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},{}],30:[function(e,t,r){(function(e){function n(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function a(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function s(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function u(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function d(e,t){return function(r){return e(t(r))}}function p(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function h(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function y(){this.__data__=Ut?Ut(null):{}}function v(e){return this.has(e)&&delete this.__data__[e]}function b(e){var t=this.__data__;if(Ut){var r=t[e];return r===Ie?void 0:r}return wt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Ut?void 0!==t[e]:wt.call(t,e)}function m(e,t){var r=this.__data__;return r[e]=Ut&&void 0===t?Ie:t,this}function _(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(){this.__data__=[]}function E(e){var t=this.__data__,r=F(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():jt.call(t,r,1),!0}function O(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]}function S(e){return F(this.__data__,e)>-1}function P(e,t){var r=this.__data__,n=F(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function T(){this.__data__={hash:new h,map:new(xt||_),string:new h}}function k(e){return ae(this,e).delete(e)}function I(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function R(e,t){return ae(this,e).set(e,t),this}function C(e){this.__data__=new _(e)}function L(){this.__data__=new _}function D(e){return this.__data__.delete(e)}function x(e){return this.__data__.get(e)}function M(e){return this.__data__.has(e)}function N(e,t){var r=this.__data__;if(r instanceof _){var n=r.__data__;if(!xt||n.length<ke-1)return n.push([e,t]),this;r=this.__data__=new A(n)}return r.set(e,t),this}function V(e,t){var r=Wt(e)||ge(e)?u(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!wt.call(e,o)||i&&("length"==o||fe(o,n))||r.push(o);return r}function U(e,t,r){var n=e[t];wt.call(e,t)&&be(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function F(e,t){for(var r=e.length;r--;)if(be(e[r][0],t))return r;return-1}function B(e,t){return e&&ne(t,Pe(t),e)}function G(e,t,r,n,i,a,s){var u;if(n&&(u=a?n(e,i,a,s):n(e)),void 0!==u)return u;if(!Oe(e))return e;var l=Wt(e);if(l){if(u=ue(e),!t)return re(e,u)}else{var f=Qt(e),d=f==Me||f==Ne;if($t(e))return Q(e,t);if(f==Fe||f==Re||d&&!a){if(c(e))return a?e:{};if(u=le(d?{}:e),!t)return ie(e,B(u,e))}else{if(!ut[f])return a?e:{};u=ce(e,f,G,t)}}s||(s=new C);var p=s.get(e);if(p)return p;if(s.set(e,u),!l)var h=r?oe(e):Pe(e);return o(h||e,function(i,o){h&&(o=i,i=e[o]),U(u,o,G(i,t,r,n,o,e,s))}),u}function z(e){return Oe(e)?kt(e):{}}function H(e,t,r){var n=t(e);return Wt(e)?n:a(n,r(e))}function q(e){return Et.call(e)}function Y(e){if(!Oe(e)||pe(e))return!1;var t=we(e)||c(e)?Ot:at;return t.test(ye(e))}function K(e){if(!he(e))return Lt(e);var t=[];for(var r in Object(e))wt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Q(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function W(e){var t=new e.constructor(e.byteLength);return new At(t).set(new At(e)),t}function $(e,t){var r=t?W(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function J(e,t,r){var i=t?r(f(e),!0):f(e);return s(i,n,new e.constructor)}function X(e){var t=new e.constructor(e.source,ot.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,r){var n=t?r(p(e),!0):p(e);return s(n,i,new e.constructor)}function ee(e){return Yt?Object(Yt.call(e)):{}}function te(e,t){var r=t?W(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function re(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function ne(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=n?n(r[a],e[a],a,r,e):void 0;U(r,a,void 0===s?e[a]:s)}return r}function ie(e,t){return ne(e,Kt(e),t)}function oe(e){return H(e,Pe,Kt)}function ae(e,t){var r=e.__data__;return de(t)?r["string"==typeof t?"string":"hash"]:r.map}function se(e,t){var r=l(e,t);return Y(r)?r:void 0}function ue(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function le(e){return"function"!=typeof e.constructor||he(e)?{}:z(Tt(e))}function ce(e,t,r,n){var i=e.constructor;switch(t){case Ke:return W(e);case Le:case De:return new i(+e);case Qe:return $(e,n);case We:case $e:case Je:case Xe:case Ze:case et:case tt:case rt:case nt:return te(e,n);case Ve:return J(e,n,r);case Ue:case He:return new i(e);case Ge:return X(e);case ze:return Z(e,n,r);case qe:return ee(e)}}function fe(e,t){return t=null==t?je:t,!!t&&("number"==typeof e||st.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!mt&&mt in e}function he(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||bt;return e===r}function ye(e){if(null!=e){try{return _t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ve(e){return G(e,!0,!0)}function be(e,t){return e===t||e!==e&&t!==t}function ge(e){return _e(e)&&wt.call(e,"callee")&&(!It.call(e,"callee")||Et.call(e)==Re)}function me(e){return null!=e&&Ee(e.length)&&!we(e)}function _e(e){return Se(e)&&me(e)}function we(e){var t=Oe(e)?Et.call(e):"";return t==Me||t==Ne}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Se(e){return!!e&&"object"==typeof e}function Pe(e){return me(e)?V(e):K(e)}function Ae(){return[]}function Te(){return!1}var ke=200,Ie="__lodash_hash_undefined__",je=9007199254740991,Re="[object Arguments]",Ce="[object Array]",Le="[object Boolean]",De="[object Date]",xe="[object Error]",Me="[object Function]",Ne="[object GeneratorFunction]",Ve="[object Map]",Ue="[object Number]",Fe="[object Object]",Be="[object Promise]",Ge="[object RegExp]",ze="[object Set]",He="[object String]",qe="[object Symbol]",Ye="[object WeakMap]",Ke="[object ArrayBuffer]",Qe="[object DataView]",We="[object Float32Array]",$e="[object Float64Array]",Je="[object Int8Array]",Xe="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",rt="[object Uint16Array]",nt="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ot=/\w*$/,at=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,ut={};ut[Re]=ut[Ce]=ut[Ke]=ut[Qe]=ut[Le]=ut[De]=ut[We]=ut[$e]=ut[Je]=ut[Xe]=ut[Ze]=ut[Ve]=ut[Ue]=ut[Fe]=ut[Ge]=ut[ze]=ut[He]=ut[qe]=ut[et]=ut[tt]=ut[rt]=ut[nt]=!0,ut[xe]=ut[Me]=ut[Ye]=!1;var lt="object"==typeof e&&e&&e.Object===Object&&e,ct="object"==typeof self&&self&&self.Object===Object&&self,ft=lt||ct||Function("return this")(),dt="object"==typeof r&&r&&!r.nodeType&&r,pt=dt&&"object"==typeof t&&t&&!t.nodeType&&t,ht=pt&&pt.exports===dt,yt=Array.prototype,vt=Function.prototype,bt=Object.prototype,gt=ft["__core-js_shared__"],mt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_t=vt.toString,wt=bt.hasOwnProperty,Et=bt.toString,Ot=RegExp("^"+_t.call(wt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=ht?ft.Buffer:void 0,Pt=ft.Symbol,At=ft.Uint8Array,Tt=d(Object.getPrototypeOf,Object),kt=Object.create,It=bt.propertyIsEnumerable,jt=yt.splice,Rt=Object.getOwnPropertySymbols,Ct=St?St.isBuffer:void 0,Lt=d(Object.keys,Object),Dt=se(ft,"DataView"),xt=se(ft,"Map"),Mt=se(ft,"Promise"),Nt=se(ft,"Set"),Vt=se(ft,"WeakMap"),Ut=se(Object,"create"),Ft=ye(Dt),Bt=ye(xt),Gt=ye(Mt),zt=ye(Nt),Ht=ye(Vt),qt=Pt?Pt.prototype:void 0,Yt=qt?qt.valueOf:void 0;h.prototype.clear=y,h.prototype.delete=v,h.prototype.get=b,h.prototype.has=g,h.prototype.set=m,_.prototype.clear=w,_.prototype.delete=E,_.prototype.get=O,_.prototype.has=S,_.prototype.set=P,A.prototype.clear=T,A.prototype.delete=k,A.prototype.get=I,A.prototype.has=j,A.prototype.set=R,C.prototype.clear=L,C.prototype.delete=D,C.prototype.get=x,C.prototype.has=M,C.prototype.set=N;var Kt=Rt?d(Rt,Object):Ae,Qt=q;(Dt&&Qt(new Dt(new ArrayBuffer(1)))!=Qe||xt&&Qt(new xt)!=Ve||Mt&&Qt(Mt.resolve())!=Be||Nt&&Qt(new Nt)!=ze||Vt&&Qt(new Vt)!=Ye)&&(Qt=function(e){var t=Et.call(e),r=t==Fe?e.constructor:void 0,n=r?ye(r):void 0;if(n)switch(n){case Ft:return Qe;case Bt:return Ve;case Gt:return Be;case zt:return ze;case Ht:return Ye}return t});var Wt=Array.isArray,$t=Ct||Te;t.exports=ve}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?y=h.concat(y):b=-1,y.length&&u())}function u(){if(!v){var e=o(s);v=!0;for(var t=y.length;t;){for(h=y,y=[];++b<t;)h&&h[b].run();b=-1,t=y.length}h=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var h,y=[],v=!1,b=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new l(e,t)),1!==y.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],32:[function(e,t,r){function n(e,t){var r=t||0,n=i;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);t.exports=n},{}],33:[function(e,t,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,r){function n(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[n+s]=a[s];return t||o(a)}var i=e("./lib/rng"),o=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":32,"./lib/rng":33}],35:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function l(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&m(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));
},b.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var r=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function y(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];this.map[e]=i?i+","+n:n},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,n){this.map[t(e)]=r(n)},i.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=p,e.Response=v,e.fetch=function(e,t){return new Promise(function(r,n){var i=new p(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new v(t,e))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return i.main(e,t,r)}function o(e){u(e),l(e)}function a(e,t){t.on(h.default.DISPOSE,s.bind(null,e)),k[e]=t}function s(e){k[e]=null}function u(e){P.initGTM(e.use_google_tag_manager,e.google_tag_manager_data_layer_id)}function l(e){if(!e.log_debug){var t=new URL(window.location),r=_.default.parseQueryString(t.search);e.log_debug=r&&"true"===r[T]}var n=e.log_debug?S.default.getLogLevels().TRACE:S.default.getLogLevels().ERROR;A.setMinLogLevel(n)}e("./lib/gtm-controller"),e("./legacy/globalize");var c=e("bvp-shims"),f=e("./facade/facade-player"),d=n(f),p=e("./events/player-events"),h=n(p),y=e("./events/playlist-events"),v=n(y),b=e("./lib/playlist/playlist-player"),g=n(b),m=e("./utils/query-string"),_=n(m),w=e("./strategy/StrategyTypes"),E=n(w),O=e("log"),S=n(O),P=window.BVP_GTM,A=new S.default("BPlayer"),T="bvp_log_debug",k={};Object.defineProperties(i,{VERSION:{value:c.version},events:{value:Object.freeze({PlayerEvents:h.default,PlaylistEvents:v.default})}}),Object.assign(i,{main:function(e,t,r){if(!arguments.length)return void(console&&console.error&&console.error("Attempted to initialize player without arguments"));o(t);var n=new d.default(t,r,E.default.SCRIPT,e);return a(t.htmlChildId,n),n},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];o(t),t.containerElement=e;var n=new d.default(t,r,E.default.EMBED);return a(t.htmlChildId,n),n},createPlaylistPlayer:function(e,t,r){var n="[object Array]"===Object.prototype.toString.call(t)?t[0]:t;o(n),n.containerElement=e;var i=new g.default(e,t,r);return a(n.htmlChildId,i),i},getPlayer:function(e){return k[e]}}),setTimeout(function(){var e=new CustomEvent("BPlayerLoaded",{detail:{bplayer:i,version:c.version},bubbles:!0});document.dispatchEvent(e)}),window.BPlayer=window.BPlayer||i,t.exports=i},{"./events/player-events":38,"./events/playlist-events":39,"./facade/facade-player":41,"./legacy/globalize":42,"./lib/gtm-controller":43,"./lib/playlist/playlist-player":45,"./strategy/StrategyTypes":52,"./utils/query-string":61,"bvp-shims":"bvp-shims",log:"log"}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_ALMOST_FINISHED:"AD_ALMOST_FINISHED",AD_CLICKED:"AD_CLICKED",AD_COMPLETED:"AD_COMPLETED",AD_LOAD_ERROR:"AD_LOAD_ERROR",AD_LOAD_TIMED_OUT:"AD_LOAD_TIMED_OUT",AD_LOADING:"AD_LOADING",AD_LOADED:"AD_LOADED",AD_PAUSED:"AD_PAUSED",AD_PLAY_ERROR:"AD_PLAY_ERROR",AD_PLAYBACK_PROGRESS_UPDATE:"AD_PLAYBACK_PROGRESS_UPDATE",AD_PLAYBACK_TIMED_OUT:"AD_PLAYBACK_TIMED_OUT",AD_REQUESTED:"AD_REQUESTED",AD_RESUMED:"AD_RESUMED",AD_STARTED:"AD_STARTED",ADS_FAILURE:"ADS_FAILURE",ADS_READY:"ADS_READY",ALL_ADS_COMPLETED:"ALL_ADS_COMPLETED",CLIP:"clip",CONTENT_PAUSE_REQUESTED:"CONTENT_PAUSE_REQUESTED",CONTENT_RESUME_REQUESTED:"CONTENT_RESUME_REQUESTED",DURATION_CHANGE:"DURATION_CHANGE",MAX_RETRIES_REACHED:"MAX_RETRIES_REACHED",OVERLAY_COMPLETE:"OVERLAY_COMPLETE",OVERLAY_STARTED:"OVERLAY_STARTED",PAUSED:"PAUSED",REQUEST_AD_PAUSE:"REQUEST_AD_PAUSE",REQUEST_AD_PLAY:"REQUEST_AD_PLAY",RESUMED:"RESUMED",STARTED:"STARTED",SKIPPED:"SKIPPED"};r.default=n},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_LOADING:"adloading",ADS_LOAD_ERROR:"adsloaderror",ADS_LOAD_TIMEOUT:"adsloadtimeout",ADS_PLAY_ERROR:"adsplayerror",ADS_PLAY_TIMEOUT:"adsplaytimeout",ADS_TIMEOUT_ERROR:"adstimeouterror",BITRATE_CHANGE:"bitrateChange",BUFFER:"buffer",CAPTIONS_CHANGE:"captionschange",CONTENT_CHANGE:"contentchange",DISMISS_SHARE:"dismissShare",DISPOSE:"dispose",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FATAL_ERROR:"fatalError",FETCH_OVERLAY:"fetchOverlay",FULL_SCREEN_CHANGE:"fullscreenchange",HLS_BRIDGE_ERROR:"hlsBridgeError",HLS_BRIDGE_FATAL_ERROR:"hlsBridgeFatalError",HLS_CUE_IN:"hlsCueIn",HLS_CUE_OUT:"hlsCueOut",HLS_CUE_OUT_LOADED:"hlsCueOutLoaded",LOADED_METADATA:"loadedmetadata",LOADED_METADATA_SHIM:"loadedmetadata_shim",PAUSE:"pause",PLAY:"play",PLAY_PREROLL:"playPreroll",PREPARED_MIDROLL:"preparemidroll",READY:"ready",REQUEST_SHARE:"requestShare",RETRY:"retry",SEEK_START:"seekStart",SHARE:"share",SHARE_ACTION:"share_action",SHOW_OVERLAY:"showOverlay",START_MIDROLL:"startmidroll",TIMEUPDATE:"timeupdate",TRACK_INFO:"track-info",USER_ACTIVE:"useractive",USER_INACTIVE:"userinactive",VOLUME_CHANGE:"volumechange",WATCHDOG_RELOAD:"watchdogreload",BVP_VOLUME_CHANGE:"bvp_volumechange",CONTINUOUS_PLAY_START:"continuousPlayStart",COMPANION_AD:"companionAd",VIDEO_CHANGE:"videoChange",REPLAY:"replay",MUTED_OVERLAY_CLICKED:"mutedOverlayClicked",PAY_WALL_PLAY:"payWallPlay",PAY_WALL_PAUSE:"payWallPause"};r.default=n},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ALL_ITEMS_PLAYED:"ALL_ITEMS_PLAYED",ITEM_LOAD:"ITEM_LOAD",ITEM_PRELOAD:"ITEM_PRELOAD",ITEM_UNLOAD:"ITEM_UNLOAD",RESIZE:"resize",SLIDE_CLICK:"SLIDE_CLICK",STARTED:"STARTED",TRANSITION_CANCEL:"TRANSITION_CANCEL",TRANSITION_END:"TRANSITION_END",TRANSITION_SKIP:"TRANSITION_SKIP",RESUME:"RESUME"};r.default=n},{}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"https:"===location.protocol&&h.default.isDev?e.replace(":"+h.default.localPort,":"+(h.default.localPort+1)):e}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../utils/style-injector"),u=n(s),l=e("script-injector"),c=n(l),f=e("load-timer"),d=n(f),p=e("resources"),h=n(p),y=e("log"),v=n(y),b=e("error-report"),g=n(b),m=c.default.getInstance(),_=new v.default("DependencyLoader"),w="//imasdk.googleapis.com/js/sdkloader/ima3.js",E=function(){function e(){i(this,e),this.loader=null,this.deferQueue=[]}return a(e,[{key:"loadDependencies",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.loader?this.loader.then(t).catch(function(e){return g.default.recordGenericError(_,e)}):(this.loader=this._loadAppDependencies().then(function(){return e._loadAppBundle()}).then(t).then(function(t){return e.loader=null,e.executeDeferredInstructions(),t}).catch(function(e){return g.default.recordGenericError(_,e)}),this.loader)}},{key:"deferExecution",value:function(e,t){this.deferQueue.push({method:e,args:t})}},{key:"executeDeferredInstructions",value:function(){var e=this;this.deferQueue&&(this.deferQueue.forEach(function(t){e[t.method].apply(e,t.args)}),this.deferQueue.length=0)}},{key:"dispose",value:function(){this.loader=this.deferQueue=null}},{key:"_loadAppDependencies",value:function(){return Promise.all([u.default.inject(o(h.default.APP_CSS),this._getHtmlChildId()),m.inject(w,this._getHtmlChildId(),d.default.loadTypes.IMA_SDK),m.inject(o(h.default.VENDOR_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.VENDOR_BUNDLE)])}},{key:"_loadAppBundle",value:function(){return m.inject(o(h.default.APP_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.APP_BUNDLE)}},{key:"_getHtmlChildId",value:function(){}}]),e}();r.default=E},{"../utils/style-injector":63,"error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","script-injector":"script-injector"}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){switch(e){case p.default.SCRIPT:return new window.BPlayer.ScriptTagStrategy(t,r);case p.default.EMBED:return new window.BPlayer.EmbedStrategy(t,r);default:O.default.recordGenericError(A,"Unexpected strategy "+e)}}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=e("./dependency-loader"),f=n(c),d=e("../strategy/StrategyTypes"),p=n(d),h=e("../utils/VisibilityMonitor"),y=n(h),v=e("../events/player-events"),b=n(v),g=e("../events/ad-events"),m=n(g),_=e("log"),w=n(_),E=e("error-report"),O=n(E),S=e("load-timer"),P=n(S),A=new w.default("FacadePlayer"),T=["getId","getPlaylistIndex","getHtmlChildId","setAutoplay","isAutoplay","trackInfo"],k={US_MINI:!0,ASIA_MINI:!0,EU_MINI:!0,AUS_MINI:!0},I=function(e){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.callbacks=r,s.bvp=null,s.player=null,s.strategy=n,s.userOptions=e,s.htmlChildId=s.userOptions&&s.userOptions.htmlChildId,s.assetDetails=a,s.play=s.play.bind(s),s.visibilityMonitor=new y.default,s.on([b.default.PLAY,m.default.AD_STARTED],function(){s.playerStartedPlaying=!0}),T.forEach(function(e){var t=s;s[e]=function(){return t.bvp?t.bvp[e].apply(t.bvp,arguments):void A.warn("Unable to call "+e+" on "+t.htmlChildId+". Please wait until after ready callback has been executed")}}),P.default.setEnabled(s.htmlChildId,!k[s.userOptions.id]),P.default.trackLoadStart(s.htmlChildId,P.default.loadTypes.PLAYER_INIT),s.setup(),s}return a(t,e),u(t,[{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.setup().then(function(t){return e(t),t})}},{key:"play",value:function(){return this.playerStartedPlaying||y.default.isPageVisible()?void(this.bvp?this.bvp.play():this.deferExecution("play",arguments)):void this._registerPlayOnPageActiveEvent()}},{key:"pause",value:function(){this._unregisterPlayOnPageActiveEvent(),this.bvp?this.bvp.pause():this.deferExecution("pause",arguments)}},{key:"on",value:function(){return this.bvp?this.bvp.on.apply(this.bvp,arguments):this.deferExecution("on",arguments),this}},{key:"off",value:function(){return this.bvp?this.bvp.off.apply(this.bvp,arguments):this.deferExecution("off",arguments),this}},{key:"trigger",value:function(){return this.bvp?this.bvp.trigger.apply(this.bvp,arguments):this.deferExecution("trigger",arguments),this}},{key:"setup",value:function(){var e=this;return this.loadDependencies(function(){return e.bvp?e.bvp.ready().then(function(t){return e.player=t,t}):y.default.isPageVisible()?e._createPlayer():new Promise(function(t){e.visibilityMonitor.one(h.EVENTS.VISIBLE,function(){return t(e._createPlayer())})})})}},{key:"dispose",value:function(){this.visibilityMonitor&&(this.visibilityMonitor.dispose(),this.visibilityMonitor=null),this.bvp&&(this.bvp.dispose(),this.bvp=null),this.player=this.userOptions=this.callbacks=this.assetDetails=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_createPlayer",value:function(){var e=this,t=s(this.strategy,this.userOptions,this.assetDetails);return this.bvp=new window.BPlayer.BloombergVideoPlayer(this.userOptions,this.callbacks,t),this.bvp.ready().then(function(t){return e.player=t,t})}},{key:"_registerPlayOnPageActiveEvent",value:function(){this._unregisterPlayOnPageActiveEvent(),this.visibilityMonitor.one(h.EVENTS.VISIBLE,this.play)}},{key:"_unregisterPlayOnPageActiveEvent",value:function(){this.visibilityMonitor.off(h.EVENTS.VISIBLE,this.play)}},{key:"_getHtmlChildId",value:function(){return this.htmlChildId}}]),t}(f.default);r.default=I},{"../events/ad-events":37,"../events/player-events":38,"../strategy/StrategyTypes":52,"../utils/VisibilityMonitor":53,"./dependency-loader":40,"error-report":"error-report","load-timer":"load-timer",log:"log"}],42:[function(e,t,r){"use strict";!function(){function e(){for(var e,t=document.scripts,r=[],n=t.length-1;0<=n;n--){e=t[n];var i=(e.text||e.textContent).trim();e.src&&e.src.match(/bplayer.js/)&&Boolean(i)&&r.push(e)}return r}function t(){var t=e();t.length&&(console&&console.warn&&console.warn("[BPlayer]","You are using deprecated BPlayer initialization, please update!"),t.forEach(function(e){var t=(e.text||e.textContent).trim(),n=new Function("window","container","bmmrAsset","\n          window.containerElement = container;\n          window.bmmrAsset = bmmrAsset;\n\n          "+t);n(r,e,window.bplayerAsset)}))}var r={BPlayer:function(e,t,r){var n=this.bmmrAsset||e;t.containerElement=this.containerElement,window.BPlayer(n,t,r)}};window.BPlayer?t():window.addEventListener("BPlayerLoaded",t)}()},{}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils/utils"),s=n(a),u=e("log"),l=n(u),c=e("bvp-shims"),f=new l.default("GoogleTagManager"),d="video",p="video-eng",h="bvpTrackVideo",y="bplayer",v="dataLayer",b=/trackError|record\w*Error|getReducedCallstack|^Error$|promiseReactionJob|native code/,g=/\s*at\s*/,m={PLAY:"play",END:"end",PAUSE:"pause",RESUME:"resume",COMPLETION:"completion",UI_ACTION:"uiaction",LOAD_START:"loadstart",LOAD_END:"loadend",ERROR:"error",CLICK:"click"},_={GENERIC:"generic",LOAD:"load",HLS:"hls",AD:"ad"},w={bvpEventCategory:d,event:h,mediaPlayer:y+"-"+c.version,bvpEventValue:0},E=void 0,O=!1,S=function(){function e(){i(this,e)}return o(e,null,[{key:"initGTM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(O=Boolean(e),!O)return void f.info("GoogleTagManager tracking disabled");var r=t||v;E=window[r],E||(f.error("GTM data layer not found: "+r),O=!1)}},{key:"trackError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.trackDevEvent({bvpEventAction:m.ERROR,bvpEventLabel:e,bvpErrorDetails:t,bvpCallstack:this._getReducedCallstack(),bvpLoaderUrl:r})}},{key:"trackDevEvent",value:function(e){var t=Object.assign({},{bvpEventCategory:p},e);this.trackEvent(t)}},{key:"trackEvent",value:function(e){if(O){var t=Object.assign({},w,this._getExperimentInfo(),e),r=s.default.filterEmptyValues(t);E.push(r)}}},{key:"_getExperimentInfo",value:function(){}},{key:"_getReducedCallstack",value:function(){var e=(new Error).stack;if(!e)return null;var t=e.split(/\r?\n/),r=t.reduce(function(e,t){return b.test(t)||e.push(t.replace(g,"")),e},[]);return r.join("\n")}}]),e}();Object.defineProperties(S,{eventActions:{value:m},errorTypes:{value:_}}),window.BVP_GTM=window.BVP_GTM||S,r.default=S},{"../utils/utils":64,"bvp-shims":"bvp-shims",log:"log"}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("../../utils/css-helpers"),c=n(l),f=e("../../utils/fullscreen"),d=n(f),p=e("../../utils/event-target"),h=n(p),y=e("../../events/player-events"),v=n(y),b=e("log"),g=n(b),m=e("error-report"),_=n(m),w=new g.default("BaseView"),E="bvp-hidden",O=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.el_=e.createEl(),e.childViews_=[],e.isFullScreen=!1,e}return a(t,e),s(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=document.createElement(e);return c.default.addClass(i,t),c.default.css(i,n),Object.keys(r).reduce(function(e,t){var n=r[t];return void 0!==e[t]?e[t]=n:e.setAttribute(t,n),e},i),i}},{key:"appendView",value:function(e,r){if(!(e instanceof t))return void _.default.recordGenericError(w,"Cannot append view. Invalid view object:",e);this.childViews_.push(e);var n=(r?this.find(r):this.el_)||this.el_;n.appendChild(e.el())}},{key:"addClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.addClass(t,e)}},{key:"removeClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.removeClass(t,e)}},{key:"find",value:function(e){return this.el_.querySelector(e)}},{key:"findAll",value:function(e){return this.el_.querySelectorAll(e)}},{key:"css",value:function(e){c.default.css(this.el_,e)}},{key:"el",value:function(){return this.el_}},{key:"hide",value:function(){this.addClass(E)}},{key:"show",value:function(){this.removeClass(E)}},{key:"requestFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.requestFullScreen(this.el_)}},{key:"exitFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.exitFullScreen()}},{key:"dispose",value:function(){this.el_=null,this.childViews_.forEach(function(e){return e.dispose()}),this.childViews_=null,void 0!==this.fullScreenObserverIndex&&t.removeFullScreenObserver(this.fullScreenObserverIndex),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}],[{key:"addFullScreenObserver",value:function(e){if(d.default.isSupported())return t.fullScreenObserversCount++,t.fullScreenObservers||(t.fullScreenObservers=[],document.addEventListener(d.default.fullscreenchange,t.onFullScreenChange)),t.fullScreenObservers.push(e)-1}},{key:"removeFullScreenObserver",value:function(e){if(void 0!=e&&d.default.isSupported())return t.fullScreenObserversCount--,t.fullScreenObserversCount<=0?(document.removeEventListener(d.default.fullscreenchange,t.onFullScreenChange),t.fullScreenObservers=null,void(t.fullScreenObserversCount=0)):void(t.fullScreenObservers[e]=null)}},{key:"onFullScreenChange",value:function(e){if(t.fullScreenObservers){for(var r=e.target||d.default.getFullScreenElement(),n=d.default.isInFullScreen(),i=[],o=0,a=t.fullScreenObservers.length;o<a;o++){var s=t.fullScreenObservers[o];s&&(r!==s.el_&&r||(s.isFullScreen=n,s.trigger(v.default.FULL_SCREEN_CHANGE,{fullscreen:n})),s.fullScreenObserverIndex=i.push(s)-1)}t.fullScreenObservers=i}}}]),t}(h.default);Object.defineProperties(O,{fullScreenObservers:{value:null,writable:!0},fullScreenObserversCount:{value:0,writable:!0}}),r.default=O},{"../../events/player-events":38,"../../utils/css-helpers":56,"../../utils/event-target":58,"../../utils/fullscreen":59,"error-report":"error-report",log:"log"}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e&&e.hasOwnProperty(Z)&&e[Z].disable(),e}function u(e){return e&&e.hasOwnProperty(Z)&&e[Z].enable(),e}function l(){return"bvp_playlist_"+Date.now()}function c(e,t){var r=t();this.removeEventListener(ie,r),e()}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,{htmlChildId:l()},t)}function d(e){e&&e.TitleBar&&e.TitleBar.show()}function p(e,t,r){for(var n=[],i=Math.min(e.length,r),o=0;o<i;o++){var a=(t+o)%e.length,s=e[a];n.push(s)}return n}Object.defineProperty(r,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),v=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},b=e("../../events/ad-events"),g=n(b),m=e("../../utils/fullscreen"),_=n(m),w=e("../../utils/event-target"),E=n(w),O=e("../../facade/facade-player"),S=n(O),P=e("../../events/player-events"),A=n(P),T=e("../../events/playlist-events"),k=n(T),I=e("./playlist-view"),j=n(I),R=e("./transition-view"),C=n(R),L=e("./up-next-view"),D=n(L),x=e("../../services/personalization-service"),M=n(x),N=e("../../services/geoip-service"),V=n(N),U=e("../../strategy/StrategyTypes"),F=n(U),B=e("../../utils/projector-utils"),G=n(B),z=e("../projector-settings-js/poster-size"),H=n(z),q=e("log"),Y=n(q),K=e("error-report"),Q=n(K),W=new Y.default("PlaylistPlayer"),$=2,J=function(){},X={loadSuggestions:!0,preloadThreshold:10,repeat:!1,startFrom:0,onReady:J,onError:J,transitionDuration:5e3},Z="PlaybackOutro",ee=["getSuggestions","onCancelTransition","onFullScreenChange","onSlideClick","onResumeRequest","onTimeUpdate","onVideoEnd","onVideoPause","onVideoPlay","toggleFullScreen"],te=".bvp-playlist-slide",re="bvp-playlist-slide__preload",ne="next-slide-transition",ie="transitionend",oe="bvp-playlist-player--last",ae=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.options=Object.assign({},X,n),a.bmmrIds={},a.currentItem=a.options.startFrom,a.currentId=null,a.currentPlayer=null,a.mayLoadSuggestions=!1,a.personalizationService=new M.default(n.recommendationOptions),a.playlist=[],a.playlistItems=a.playlist.length,a.playlistView=new j.default,a.preloadingNext=!1,a.preloadItem=null,a.preloadPlayer=null,a.transitionView=new C.default(n.transitionDuration),a.upNextView=new D.default,a.geoip=new V.default,a.containerElement=e,a.playlistView.setEventParent(a),a.transitionView.setEventParent(a),a.upNextView.setEventParent(a),ee.forEach(function(e){a[e]=a[e].bind(a)}),a.add(r),a.hasRecommendations=a.playlistItems>=2,a.mayLoadSuggestions=a.options.loadSuggestions&&1===a.playlistItems,a.transitionView.hide(),a.transitionView.on(k.default.TRANSITION_END,a.playNext.bind(a,!0)).on(k.default.TRANSITION_SKIP,a.playNext.bind(a,!1)).on(k.default.TRANSITION_CANCEL,a.onCancelTransition),a.upNextView.hide(),a.upNextView.on(k.default.SLIDE_CLICK,a.onSlideClick),a.upNextView.on(k.default.RESUME,a.onResumeRequest),a.playlistView.appendView(a.upNextView,".bvp-playlist-player__container"),a.playlistView.appendView(a.transitionView,".bvp-playlist-player__container"),a.playlistView.on(A.default.FULL_SCREEN_CHANGE,a.onFullScreenChange),a.transitionView.el().style.visibility="hidden",a.upNextView.el().style.visibility="hidden";var s=a.playlistView.findAll(te);return a.primarySlide=s[0],a.preloadSlide=s[1],a.containerElement.appendChild(a.playlistView.el()),a.startPlayback(),a}return a(t,e),y(t,[{key:"resetPlaylist",value:function(e){this.playlist=[],this.bmmrIds={},this.playlistItems=0,this.currentItem=-1;for(var t=this.getCurrentId(),r=0;r<e.length;r++){var n=e[r];if(t===n.id){this.currentItem=r;break}}this.currentItem===-1&&(e.unshift(this.currentPlayer.userOptions),this.currentItem=0),this.add(e),this.hasRecommendations=e.length>1,this.upNextView.preloadPosters(this.playlist)}},{key:"add",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Array.isArray(t)?t:[t];r.forEach(function(t){t.id&&!e.bmmrIds[t.id]&&(e.playlist.push(t),t.playlistIndex=e.playlist.length-1,e.bmmrIds[t.id]=1)}),this.playlistItems=this.playlist.length}},{key:"loadVideo",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f(this.playlist[e],{containerElement:this.primarySlide,height:this.options.height,width:this.options.width});return this.trigger(k.default.ITEM_LOAD,{index:e}),this.currentItem=e,this.currentPlayer=this._createPlayer(n),this.currentId=n.id,this._attachLastVideoState(),r&&this.currentPlayer.trigger(A.default.CONTINUOUS_PLAY_START),this.currentPlayer.ready().then(s).then(function(e){return e&&(t.transitionView.el().style.visibility="",t.upNextView.el().style.visibility="",t.setTechStyle(e.techName_),_.default.isSupported()&&(e.requestFullscreen=t.toggleFullScreen,e.isFullscreen_=t.playlistView.isFullScreen),e.on(A.default.ENDED,t.onVideoEnd).on(A.default.TIMEUPDATE,t.onTimeUpdate).on(A.default.PAUSE,t.onVideoPause).on([A.default.PLAY,g.default.AD_STARTED],t.onVideoPlay)),e})}},{key:"preloadNext",value:function(){var e=this,t=this.getNextIndex();if(this.preloadingNext=!0,
void 0===t)return void u(this.currentPlayer.player);W.warn("Preloading next item:",t),this.preloadItem=t;var r=f(this.playlist[t],{containerElement:this.preloadSlide,autoplay:!1,height:this.options.height,preload:"auto",width:this.options.width});return this.trigger(k.default.ITEM_PRELOAD,{index:t}),this.preloadPlayer=this._createPlayer(r),this.preloadPlayer.ready().then(s).then(function(t){return t&&_.default.isSupported()&&(t.requestFullscreen=e.toggleFullScreen,t.isFullscreen_=e.playlistView.isFullScreen),t}).catch(function(e){return Q.default.recordGenericError(W,"Unable to preload video",e)})}},{key:"unloadVideo",value:function(){this.trigger(k.default.ITEM_UNLOAD,{index:this.currentItem}),this.preloadingNext=!1,this.upNextView.hide();try{this.currentPlayer.dispose()}catch(e){Q.default.recordGenericError(W,"Failed to dispose a playlist item:",e)}}},{key:"play",value:function(){this.currentPlayer&&this.currentPlayer.play()}},{key:"pause",value:function(){this.currentPlayer&&this.currentPlayer.pause()}},{key:"replay",value:function(){this.playlistItems&&(this.unloadVideo(),this.currentItem=0,this.currentId=null,this.startPlayback())}},{key:"ready",value:function(e){if(this.currentPlayer)return this.currentPlayer.ready(e)}},{key:"playIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;e=+e,this.playlistItems&&e>=0&&e<this.playlistItems&&this._forcePlayIndex(e)}},{key:"playId",value:function(e){for(var t,r=0;r<this.playlistItems;r++)if(t=this.playlist[r],t.id===e){this.playIndex(r);break}}},{key:"getCurrentId",value:function(){return this.currentId}},{key:"setAutoplay",value:function(e){e.autoplay=!0}},{key:"startPlayback",value:function(){var e=this;return this.playlistItems?this.loadVideo(this.currentItem).then(function(t){return e.trigger(k.default.STARTED),e.options.onReady(t),t}).then(this.getSuggestions).catch(function(t){e.options.onError(t),Q.default.recordGenericError(W,"Failed to start playback:",t)}):Promise.reject()}},{key:"getCurrentPlayer",value:function(){return this.currentPlayer}},{key:"getNextIndex",value:function(){var e=this.currentItem+1,t=this.playlistItems;return e>=t?this.options.repeat?0:void 0:e}},{key:"getNextItems",value:function(e){var t=this.getNextIndex();return this.options.repeat?p(this.playlist,t,e):this.playlist.slice(t,t+e)}},{key:"getPrevIndex",value:function(){var e=this.currentItem-1,t=0;return e<t?this.options.repeat?this.playlistItems-1:void 0:e}},{key:"getSuggestions",value:function(e){var t=this;if(this.mayLoadSuggestions){var r=function(){var r=t.playlist[0],n=e.options_.metadata.compressedID,i="Video|"+n,o={exclude:i,currentResource:i};return{v:t.geoip.getGeoIpData().then(function(e){return e&&(o.country=e.country,o.region=e.trackingRegion),t.personalizationService.getRecommendations(o,r)}).then(function(e){return t.hasRecommendations=Boolean(e.length),t.add(e),t.upNextView.preloadPosters(t.playlist),e})}}();if("object"===("undefined"==typeof r?"undefined":h(r)))return r.v}return Promise.resolve(this.playlist)}},{key:"transitionToPreloadSlide",value:function(){var e=this;return new Promise(function(t){var r=void 0!==e.preloadSlide.style.transition;if(!r)return void t();var n=c.bind(e.preloadSlide,t,function(){return n});e.preloadSlide.addEventListener(ie,n),e.playlistView.addClass(ne)})}},{key:"trigger",value:function(e,r){this.currentPlayer&&!k.default[e]&&e!==A.default.PAUSE&&e!==A.default.PLAY&&this.currentPlayer.trigger(e,r),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,e,r)}},{key:"playNext",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.transitionView.hide(),this.preloadPlayer)return this.currentId=this.preloadPlayer.userOptions.id,this.preloadPlayer.ready().then(function(){e.trigger(A.default.VIDEO_CHANGE,{newVideoIndex:e.preloadPlayer.getPlaylistIndex()}),e.preloadPlayer.setAutoplay(!0),t&&e.preloadPlayer.trigger(A.default.CONTINUOUS_PLAY_START),e.preloadPlayer.play(),e.transitionToPreloadSlide().then(function(){e.unloadVideo(),e.swapSlides(),e.playlistView.removeClass(ne),e.currentPlayer.on(A.default.ENDED,e.onVideoEnd).on(A.default.TIMEUPDATE,e.onTimeUpdate).on(A.default.PAUSE,e.onVideoPause).on([A.default.PLAY,g.default.AD_STARTED],e.onVideoPlay)})});var r=this.getNextIndex();return void 0===r?void this.onEndOfPlaylist():void this._forcePlayIndex(r,t)}},{key:"playPrevious",value:function(){var e=this.getPrevIndex();return void 0===e?void W.warn("Reached the beginning of the playlist"):void this._forcePlayIndex(e)}},{key:"swapSlides",value:function(){this.playlistView.removeClass(re,this.preloadSlide),this.playlistView.addClass(re,this.primarySlide);var e=this.primarySlide,t=this.preloadSlide;this.primarySlide=t,this.preloadSlide=e,this.currentPlayer=this.preloadPlayer,this.currentItem=this.preloadItem,this.currentId=this.preloadPlayer.userOptions.id,this.currentPlayer.player&&(this.currentPlayer.player.isFullscreen_=this.playlistView.isFullScreen),this.preloadPlayer=this.preloadItem=e=t=null}},{key:"setTechStyle",value:function(e){var t=G.default.isMobile()?"-mobile":"";this.playlistView.addClass(("vjs-tech-"+e+t).toLowerCase())}},{key:"toggleFullScreen",value:function(){this.playlistView.isFullScreen?this.playlistView.exitFullScreen():this.playlistView.requestFullScreen()}},{key:"onFullScreenChange",value:function(e){this.currentPlayer.player.isFullscreen_=e.detail.fullscreen,this.currentPlayer.player.trigger(A.default.FULL_SCREEN_CHANGE)}},{key:"onEndOfPlaylist",value:function(){W.warn("End of playlist reached"),this.trigger(k.default.ALL_ITEMS_PLAYED)}},{key:"onVideoEnd",value:function(e){var t=this;if(e.target!==document){if(this.preloadingNext=!1,!this.hasRecommendations&&!this.options.repeat)return void this.onEndOfPlaylist();this.preloadPlayer&&this.preloadPlayer.ready().then(function(e){return e?(t.transitionView.setTitle(e.options_.title),t.transitionView.setPoster(e.options_.posterUrl),void t.transitionView.setId(e.options_.original_user_options.id)):void Q.default.recordGenericError(W,"Unable to get preload player")});var r=this.getNextIndex();if(void 0!==r){var n=this.playlist[r],i=this.currentPlayer.player,o=H.default.closestImage(i.currentWidth(),i.currentHeight(),n.poster);this.transitionView.setTitle(n.title),this.transitionView.setPoster(o),this.transitionView.setId(n.id)}this.transitionView.show()}}},{key:"onTimeUpdate",value:function(){var e=this.currentPlayer.player.currentTime(),t=this.currentPlayer.player.duration(),r=t-e,n=r&&r<this.options.preloadThreshold;!n||this.preloadingNext||this.currentPlayer.player.ended()||this.preloadNext()}},{key:"onVideoPause",value:function(){if(!this.currentPlayer.player.ended()){var e=this.getNextItems($);this.hasRecommendations=Boolean(e.length),this.hasRecommendations&&(this.upNextView.createSlidesFor(e),this.upNextView.show()),this.trigger(A.default.PAUSE,{player:this.currentPlayer.player})}}},{key:"onVideoPlay",value:function(){this.hasRecommendations&&this.upNextView.hide(),this.trigger(A.default.PLAY,{player:this.currentPlayer.player})}},{key:"onCancelTransition",value:function(){d(this.currentPlayer.player),this.transitionView.hide(),this.upNextView.show()}},{key:"onSlideClick",value:function(e){var t=e.detail.id;this.playId(t)}},{key:"onResumeRequest",value:function(){this.currentPlayer.play()}},{key:"dispose",value:function(){this.unloadVideo(),this.removeAllEventListeners(),this.playlistView.dispose(),this.currentPlayer=this.preloadPlayer=this.options=this.playlist=null,this.playlistView=this.upNextView=this.transitionView=this.primarySlide=this.preloadSlide=null,this.containerElement.innerHTML="",v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_forcePlayIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trigger(A.default.VIDEO_CHANGE,{newVideoIndex:e}),this.unloadVideo();var r=this.playlist[e];this.setAutoplay(r),this.loadVideo(e,t)}},{key:"_attachLastVideoState",value:function(){var e=void 0===this.getNextIndex();e?this.playlistView.addClass(oe):this.playlistView.removeClass(oe)}},{key:"_createPlayer",value:function(e){return this.currentPlayer&&this._updateCorrelator(),new S.default(e,null,F.default.EMBED)}},{key:"_updateCorrelator",value:function(){var e=window,t=e.googletag;t&&t.cmd&&t.cmd.push&&t.cmd.push(function(){t.pubads().updateCorrelator()})}}]),t}(E.default);r.default=ae},{"../../events/ad-events":37,"../../events/player-events":38,"../../events/playlist-events":39,"../../facade/facade-player":41,"../../services/geoip-service":50,"../../services/personalization-service":51,"../../strategy/StrategyTypes":52,"../../utils/event-target":58,"../../utils/fullscreen":59,"../../utils/projector-utils":60,"../projector-settings-js/poster-size":49,"./playlist-view":46,"./transition-view":47,"./up-next-view":48,"error-report":"error-report",log:"log"}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../utils/resize-monitor"),d=n(f),p=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.resizeMonitor=new d.default(e.el_),e.resizeMonitor.setEventParent(e),e}return a(t,e),s(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playlist-player",{"data-breakpoints":"320 640 800",innerHTML:'\n    <div class="bvp-playlist-player__container">\n       <div class="bvp-playlist-slide"></div>\n       <div class="bvp-playlist-slide bvp-playlist-slide__preload"></div>\n    </div>\n    '})}},{key:"dispose",value:function(){this.resizeMonitor.dispose(),this.resizeMonitor=null,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=p},{"../../utils/resize-monitor":62,"./base-view":44}],47:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../events/playlist-events"),d=n(f),p=["onTransitionEnd","onCancel","onPlay"],h=5e3,y="click",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return p.forEach(function(e){r[e]=r[e].bind(r)}),r.animationDuration=e,r.animationTimerId=null,r.title=r.find(".bvp-playback-transition__title"),r.countdown=r.find(".autoplay-countdown"),r.cancelButton=r.find(".bvp-playback-transition__cancel"),r.playButton=r.find(".bvp-playback-transition__countdown"),r.cancelButton.addEventListener(y,r.onCancel),r.playButton.addEventListener(y,r.onPlay),r}return a(t,e),s(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playback-transition",{innerHTML:'\n        <div class="bvp-playback-transition__container">\n            <div class="bvp-playback-transition__title"></div>\n            <div class="bvp-playback-transition__buttons">\n                <div class="bvp-playback-transition__countdown" role="button">\n                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97 97">\n                      <circle class="autoplay-countdown" fill="none" stroke="#fff" stroke-width="4" transform="translate(48.5 48.5)rotate(-90)translate(-48.5 -48.5)" cx="48.5" cy="48.5" r="46" />\n                      <path d="M37 34.5V62.5l25-13.1Z" fill="#fff"/>\n                  </svg>\n                </div>\n                <button class="bvp-playback-transition__cancel"></button>\n            </div>\n        </div>\n        '.trim()})}},{key:"animateTransition",value:function(){var e=this,t=this.el_.getElementsByClassName("autoplay-countdown")[0];t.style["animation-duration"]=Math.floor(this.animationDuration/1e3)+"s",this.animationTimerId=setTimeout(function(){e.onTransitionEnd()},this.animationDuration)}},{key:"cancelTransition",value:function(){window.clearTimeout(this.animationTimerId),this.animationTimerId=null}},{key:"show",value:function(){this.animateTransition(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"setTitle",value:function(e){this.title.textContent=e}},{key:"setPoster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.css({"background-image":"url("+e+")"})}},{key:"setId",value:function(e){this.id=e}},{key:"onCancel",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_CANCEL,{id:this.id})}},{key:"onPlay",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_SKIP,{id:this.id})}},{key:"onTransitionEnd",value:function(){this.trigger(d.default.TRANSITION_END,{id:this.id})}},{key:"dispose",value:function(){this.cancelTransition(),this.cancelButton.removeEventListener(y,this.onCancel),this.playButton.removeEventListener(y,this.onPlay),this.title=this.countdown=this.cancelButton=this.playButton=null,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=v},{"../../events/playlist-events":39,"./base-view":44}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=e("./base-view"),f=n(c),d=e("../../utils/css-helpers"),p=n(d),h=e("../../utils/datetime-utils"),y=n(h),v=e("../../events/playlist-events"),b=n(v),g=e("../projector-settings-js/poster-size"),m=n(g),_="bvp-up-next__slide",w="bvp-up-next__slide-title",E="data-bmmr-id",O="data-playlist-index",S="click",P=2,A=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSlideClick=e.onSlideClick.bind(e),e.container=e.find(".bvp-up-next__container"),e.el_.addEventListener(S,e.onSlideClick),e}return s(t,e),u(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-up-next",{innerHTML:'\n                <div class="bvp-up-next__resume"></div>\n                <div class="bvp-up-next__container"></div>\n            '})}},{key:"clearSlides",value:function(){this.container.innerHTML=""}},{key:"createSlide",value:function(e){var r,n=e.duration?y.default.formatSeconds(e.duration/1e3):"";return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",_,(r={innerHTML:'\n                <span class="bvp-up-next__slide-duration">'+n+'</span>\n                <span class="bvp-up-next__slide-title">'+(e.title||"")+"</span>\n            "},i(r,E,e.id),i(r,O,e.playlistIndex),r),{"background-image":"url('"+this._getSmallPosterUrl(e.poster)+"')"})}},{key:"createSlidesFor",value:function(e){var t=this,r=e.slice(0,2);this.clearSlides(),r.forEach(function(e){var r=t.createSlide(e);t.container.appendChild(r)})}},{key:"preloadPosters",value:function(e){for(var r=Math.min(e.length,P),n=0;n<r;n++){var i=e[n],o=this._getSmallPosterUrl(i.poster);if(!o)return;var a=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"link",null,{rel:"prefetch",href:o});this.container.appendChild(a)}}},{key:"onSlideClick",value:function(e){var t=void 0,r=void 0;return p.default.hasClass(e.target,_)?(t=e.target.getAttribute(E),r=e.target.getAttribute(O),void this.trigger(b.default.SLIDE_CLICK,{id:t,playlistIndex:r})):p.default.hasClass(e.target,w)?(t=e.target.parentElement.getAttribute(E),r=e.target.getAttribute(O),void this.trigger(b.default.SLIDE_CLICK,{id:t,playlistIndex:r})):void this.trigger(b.default.RESUME)}},{key:"dispose",value:function(){this.el_.removeEventListener(S,this.onSlideClick),this.container.removeEventListener(S,this.onSlideClick),this.container=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_getSmallPosterUrl",value:function(e){return m.default.closestImage(1,1,e)}}]),t}(f.default);r.default=A},{"../../events/playlist-events":39,"../../utils/css-helpers":56,"../../utils/datetime-utils":57,"../projector-settings-js/poster-size":49,"./base-view":44}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),s=n(a),u=e("array-find-index"),l=n(u),c=new s.default("PosterSize"),f=[{width:320,height:180},{width:640,height:360},{width:960,height:540}],d=/(.*)-1x-1\.(.*)/,p=.5625,h=function(){function e(){i(this,e)}return o(e,null,[{key:"isTemplateImage",value:function(e){return d.test(e)}},{key:"closestImage",value:function(t,r,n){if(!e.isTemplateImage(n))return c.warn("Cannot resize: Invalid template image",n),n;if(t=parseFloat(t),r=parseFloat(r),t<=0)return c.warn("Cannot resize: Invalid container size",t,r),n;r<=0&&(r=t*p);var i=(0,l.default)(f,function(e){return e.width>=t&&e.height>=r});i===-1&&(i=f.length-1);var o=f[i];return n.replace(d,"$1"+o.width+"x"+o.height+".$2")}}]),e}();r.default=h},{"array-find-index":1,log:"log"}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("resources"),s=n(a),u=e("error-report"),l=n(u),c=e("log"),f=n(c),d=new f.default("GeoIpService"),p=""+s.default.GEOIP_API,h=function(){function e(){i(this,e)}return o(e,[{key:"getGeoIpData",value:function(){return fetch(p,{method:"GET",mode:"cors"}).then(function(e){var t=e.headers.get("content-type");if(e.ok&&t&&t.indexOf("application/json")!==-1)return e.json();throw new Error("GeoIP returned an invalid response")}).catch(function(e){l.default.recordLoadError(d,p,"Error fetching geoip data: ",e)})}}]),e}();r.default=h},{"error-report":"error-report",log:"log",resources:"resources"}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils/cookies"),s=n(a),u=e("../utils/query-string"),l=n(u),c=e("resources"),f=n(c),d=e("log"),p=n(d),h=e("error-report"),y=n(h),v=new p.default("PersonalizationService"),b="agent_id",g="_breg-uid",m="exp_pref",_="session_id",w="session_key",E=f.default.PERSONALIZATION_API+"/user/recommendations/meta/",O={backfillFacets:"Video|All",country:"US",decayCoefficient:1,inactivePeriod:2592e6,interactionsLimit:1,limit:10,maxAge:6048e5,region:"US",rescorers:"random;tpx","rescorers.tpx.minimumScore":.1,"rescorers.random.minimumScore":.1,resourceTypes:"Video",thumbnailRequired:!0},S={autoplay:!0,techOrder:["html5","flash"]},P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var r=s.default.get(b),n=s.default.get(m),o=s.default.get(g),a=s.default.get(_),u=s.default.get(w),l=60*(new Date).getTimezoneOffset()*1e3;this.options=Object.assign({},O,t),r&&(this.options[b]=r),n&&(this.options[m]=n),o&&(this.options.breg=o),a&&(this.options[_]=a),u&&(this.options[w]=u),this.options.timezoneOffset=l}return o(e,[{key:"getRecommendations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this.options,t),i=E+"?"+l.default.toQueryString(n);return fetch(i,{mode:"cors"}).then(function(e){return e.json()}).then(function(t){return e.formatRecommendations(t,r)}).catch(function(e){y.default.recordLoadError(v,i,"Error fetching personalization data:",e)})}}],[{key:"formatRecommendations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return e.map(function(e){var r={title:e.headline,poster:e.thumbnailUrl,id:e.assetID,share_metadata:{canonical_url:e.url}};return Object.assign({},t,r)})}}]),e}();r.default=P},{"../utils/cookies":55,"../utils/query-string":61,"error-report":"error-report",log:"log",resources:"resources"}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={EMBED:"embed",SCRIPT:"script"};r.default=n},{}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.EVENTS=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f={VISIBLE:"VISIBLE",INVISIBLE:"INVISIBLE"},d={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},p=void 0,h=void 0,y=!1;for(var v in d)if("undefined"!=typeof document[v]){p=v,h=d[v],y=!0;break}var b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return t._isVisibilityAPISupported()&&(e._onVisibilityChange=e._onVisibilityChange.bind(e),document.addEventListener(h,e._onVisibilityChange)),e}return a(t,e),s(t,[{key:"dispose",value:function(){t._isVisibilityAPISupported()&&document.removeEventListener(h,this._onVisibilityChange),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onVisibilityChange",value:function(){var e=t.isPageVisible()?f.VISIBLE:f.INVISIBLE;this.trigger(e)}}],[{key:"isPageVisible",value:function(){return!document[p]}},{key:"_isVisibilityAPISupported",value:function(){return y}}]),t}(c.default);r.EVENTS=f,r.default=b},{"./event-target":58}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return s.default.isDate(e)&&!isNaN(e.getTime())}function o(e){e=e||u;var t=new Date;if(t.setTime(t.getTime()+e),t&&!i(t))throw new Error("Invalid expires parameter");return t}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./utils"),s=n(a),u=7776e6,l={stringInGMT:function(e){var t=o(e);return t.toGMTString()},totalMilliseconds:function(e){var t=o(e);return t.getTime()}};r.default=l},{"./utils":64}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("escape-string-regexp"),s=n(a),u=e("./cookie-expiration-date"),l=n(u),c="/",f=!1,d="",p=function(){function e(){i(this,e)}return o(e,[{key:"get",value:function(e){var t=new RegExp("[; ]"+(0,s.default)(e)+"=([^\\s;]*)"),r=document.cookie.match(t);return e&&r?decodeURI(r[1]):void 0}},{key:"set",value:function(e,t,r,n){var i=this.getCookieOptions(n||{});t=r?encodeURIComponent(t):t,document.cookie=this.generateCookieString(e,t,i)}},{key:"remove",value:function(e,t){var r=this.getCookieOptions(t||{});r.expires=new Date(-1).toGMTString(),this.set(e,"",!1,r)}},{key:"generateCookieString",value:function(e,t,r){var n=e+"="+t;return n+=";path="+r.path,n+=";domain="+r.domain,n+=r.expires?";expires="+r.expires:"",n+=r.secure?";secure":""}},{key:"getCookieOptions",value:function(e){e=e||{};var t=e&&e.expires?e.expires:null;return{path:e&&e.path?e.path:c,domain:d,expires:l.default.stringInGMT(t),secure:void 0!==e.secure?e.secure:f}}}]),e}();r.default=new p},{"./cookie-expiration-date":54,"escape-string-regexp":29}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=e.length,n=0;n<r;n++)if(t===e[n])return n;return-1}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./utils"),u=n(s),l=/\s+/,c=" ",f=["-webkit-","-moz-","-ms-","-o-"],d=function(){function e(){i(this,e)}return a(e,null,[{key:"addClass",value:function(e,t){if(!e||!t)return this;if(e.classList)return e.classList.add(t),this;var r=e.className?e.className.trim().split(l):[];return o(r,t)!==-1?this:(e.className=r.concat([t]).join(c),this)}},{key:"addClassList",value:function(t,r){return u.default.isArray(r)&&r.forEach(function(r){e.addClass(t,r)}),this}},{key:"removeClass",value:function(e,t){if(!e)return this;if(e.classList)return e.classList.remove(t),this;var r=e.className?e.className.trim().split(l):[],n=o(r,t);return n===-1?this:(r.splice(n,1),e.className=r.join(c),this)}},{key:"hasClass",value:function(e,t){if(e){if(e.classList)return e.classList.contains(t);var r=e.className.trim().split(l);return o(r,t)!==-1}}},{key:"css",value:function(e,t){if("string"==typeof t)return void(e.style.cssText=t);var r=Object.keys(t).map(function(e){var r=e.toLowerCase(),n=t[e];return r+": "+n+";"}).join("");r&&(e.style.cssText=r)}},{key:"computedStylesFor",value:function(e){return document.defaultView.getComputedStyle(e,"")}},{key:"transform",value:function(e,t){if(e){var r="transform";if(!(r in e.style))for(var n,i=0,o=f.length;i<o&&(n=f[i],r=n+r,!(r in e.style));i++);e.style[r]=t}}}]),e}();r.default=d},{"./utils":64}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=3600,a=60,s=["January","February","March","April","May","June","July","August","September","October","November","December"],u=function(){function e(){n(this,e)}return i(e,null,[{key:"convertToSeconds",value:function(e){if(!e)return null;var t=e.split(":");if(t.length<3)return null;var r=parseInt(t[0],10),n=parseInt(t[1],10),i=parseFloat(t[2]);return r*o+n*a+i}},{key:"formatSeconds",value:function(e){var t=Math.round(e),r=0;t>=60&&(r=Math.floor(t/60),t%=60);var n=""+(r?r:"0"),i=""+(t<10?"0"+t:t);return n+":"+i}},{key:"formatForReporting",value:function(e){if(!e)return"";var t=e.getDate(),r=e.getMonth(),n=e.getFullYear();return s[r]+" "+t+", "+n}}]),e}();r.default=u},{}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){e&&t.bubbles&&!t.defaultPrevented&&(t.originalTarget||Object.defineProperty(t,"originalTarget",{value:r}),e.dispatchEvent(t))}function o(e,t){return a(e)&&t&&"function"==typeof t;
}function a(e){return e&&"string"==typeof e}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=/\s*,\s*/g,l=Symbol("listeners"),c=Symbol("parent"),f=function(){function e(){n(this,e),this[l]={},this[c]=null}return s(e,[{key:"addEventListener",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e,t)&&(this[l][e]||(this[l][e]=[]),this[l][e].push({callback:t,deRegister:r}))}},{key:"removeEventListener",value:function(e,t){if(o(e,t)){var r=this[l][e];if(r){if(!t)return void(r.length=0);for(var n=0,i=r.length;n<i;n++)if(r[n].callback===t)return r.splice(n,1),this.removeEventListener(e,t)}}}},{key:"removeAllEventListeners",value:function(){var e=this;this[l]&&Object.keys(this[l]).forEach(function(t){e[l][t].length=0})}},{key:"dispatchEvent",value:function(e){var t=this;if(this[l]){var r=e.type;if(this[l].hasOwnProperty(r)){var n=this[l][r],o=[];this._overrideEventTarget(e);for(var a=0,s=n.length;a<s;a++){var u=n[a].callback,f=n[a].deRegister;u.call(this,e),f&&o.push(u)}o.forEach(function(e){return t.removeEventListener(r,e)})}i(this[c],e,this)}}},{key:"setEventParent",value:function(t){t instanceof e&&(this[c]=t)}},{key:"on",value:function(e,t){var r=this;if(!o(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.addEventListener(e,t)}),this}},{key:"one",value:function(e,t){var r=this;if(!o(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.addEventListener(e,t,!0)}),this}},{key:"off",value:function(e,t){var r=this;if(!o(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.removeEventListener(e,t)}),this}},{key:"trigger",value:function(e,t){if(!a(e))return this;var r=new CustomEvent(e,{detail:t,bubbles:!0,originalTarget:this,target:this});return this.dispatchEvent(r),this}},{key:"dispose",value:function(){this.removeAllEventListeners(),this[l]=null,this[c]=null}},{key:"_overrideEventTarget",value:function(e){Object.defineProperty(e,"target",{value:this,configurable:!0})}}]),e}();r.default=f},{}],59:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return void 0!==document.fullscreenEnabled?"default":void 0!==document.webkitFullscreenEnabled?"webkit":void 0!==document.mozFullScreenEnabled?"moz":void 0!==document.msFullscreenEnabled?"ms":void 0}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a={webkit:{element:"webkitFullscreenElement",enabled:"webkitFullscreenEnabled",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror",request:"webkitRequestFullscreen",status:"webkitIsFullScreen"},moz:{element:"mozFullScreenElement",enabled:"mozFullScreenEnabled",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror",request:"mozRequestFullScreen",status:"mozFullScreen"},ms:{element:"msFullscreenElement",enabled:"msFullscreenEnabled",exit:"msExitFullscreen",onchange:"MSfullscreenchange",onerror:"MSfullscreenerror",request:"msRequestFullscreen",status:"msFullscreen"},default:{element:"fullscreenElement",enabled:"fullscreenEnabled",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror",request:"requestFullscreen",status:"fullscreen"}},s=i(),u=void 0!==s,l=function(){function e(){n(this,e)}return o(e,null,[{key:"requestFullScreen",value:function(e){if(u){var t=a[s].request;e[t]()}}},{key:"exitFullScreen",value:function(){if(u){var e=a[s].exit;this._getDocumentProperty(e)()}}},{key:"isEnabled",value:function(){if(!u)return!1;var e=a[s].enabled;return this._getDocumentProperty(e)}},{key:"isSupported",value:function(){return u}},{key:"isInFullScreen",value:function(){if(u){var e=a[s].status;return this._getDocumentProperty(e)}}},{key:"getFullScreenElement",value:function(){if(u){var e=a[s].element;return this._getDocumentProperty(e)}}},{key:"getVendorPrefix",value:function(){return s}},{key:"_getDocumentProperty",value:function(e){return document[e]}}]),e}();Object.assign(l,{vendorMap:a,fullscreenchange:u&&a[s].onchange,fullscreenerror:u&&a[s].onerror}),r.default=l},{}],60:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=e.major,n=e.minor,i=e.patch,o=t.major,a=t.minor,s=t.patch;return r>o||r===o&&(n>a||n===a&&i>=s)}function o(e){if(!S.isAutoplayDisabledBrowser()&&!e.start_muted)return!1;var t=e.metadata.player_type;return"mini"!==t&&"radio"!==t}function a(e){try{return new ActiveXObject(e)}catch(e){return!1}}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u="$version",l=/Firefox\//,c=/CriOS/,f="mini",d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,p=/[\d]+/g,h="ShockwaveFlash.ShockwaveFlash",y="ShockwaveFlash.ShockwaveFlash.6",v="ShockwaveFlash.ShockwaveFlash.7",b="Shockwave Flash",g="Shockwave Flash 2.0",m="application/x-shockwave-flash",_="",w=/version\/(\d+)(\.(\d+))?(\.(\d+))?/i,E=/Chrome\/(\d+)(\.(\d+))?(\.(\d+))?/,O=!1,S=function(){function e(){n(this,e)}return s(e,null,[{key:"forcedToPlayFlash",value:function(t){var r=t&&Array.isArray(t.techOrder)&&t.techOrder[0];return!(e.isMobile()||!r||"flash"!==r)&&Boolean(e.getFlashVersion())}},{key:"getFlashVersion",value:function(){var t=void 0;return navigator.plugins&&navigator.plugins.length?(t=navigator.plugins[b])?e.parseFlashVersion(t.description):(t=navigator.plugins[g],t?"2.0.0.11":_):navigator.mimeTypes&&navigator.mimeTypes.length?(t=navigator.mimeTypes[m],t&&t.enabledPlugin?e.parseFlashVersion(t.enabledPlugin.description):_):(t=a(v))?e.parseFlashVersion(t.GetVariable(u)):a(y)?"6.0.21":(t=a(h))?e.parseFlashVersion(t.GetVariable(u)):_}},{key:"isContentAllowedToAutoplay",value:function(t){return!e.isAutoplayDisabledBrowser()||e.isMutedOverlayShowing(t)}},{key:"shouldStartMuted",value:function(t){return e.isMutedOverlayShowing(t)}},{key:"isMutedOverlayShowing",value:function(t){return e.isMutedOverlayEnabled(t)&&t.original_user_options.autoplay}},{key:"isMutedOverlayEnabled",value:function(e){return e.useMutedOverlayPlugin&&o(e)}},{key:"isActionRequiredToPlayAd",value:function(t){return!t&&e.isAutoplayDisabledBrowser()}},{key:"isHlsSupported",value:function(){return!!e.isMobile()||Hls.isSupported()}},{key:"isMiniPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.playerType===f}},{key:"isMobile",value:function(){return d.test(this.userAgent())}},{key:"isSafariDesktop",value:function(){var e=this.userAgent().toLocaleLowerCase();return e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1}},{key:"isChrome64OrAbove",value:function(){var e=this.getBrowserVersion(this.userAgent(),E);return i(e,{major:64,minor:0,patch:0})}},{key:"isSafariDesktop11",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),w);return 11===e.major&&0===e.minor&&0===e.patch}},{key:"isSafariDesktop11Above",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),w);return i(e,{major:11,minor:0,patch:1})}},{key:"isSafariDesktop11OrAbove",value:function(){return this.isSafariDesktop11()||this.isSafariDesktop11Above()}},{key:"canAutoplayAfterAction",value:function(){return this.isSafariDesktop11Above()||this.isChrome64OrAbove()}},{key:"isAutoplayDisabledBrowser",value:function(){return!this.getAutoplayAllowed()&&this.isAutoplayWithSoundDisabledBrowser()}},{key:"isAutoplayWithSoundDisabledBrowser",value:function(){return this.isSafariDesktop11OrAbove()||this.isMobile()||this.isChrome64OrAbove()}},{key:"needDirectUserActionToPlay",value:function(){return!this.getAutoplayAllowed()&&(this.isSafariDesktop11()||this.isMobile())}},{key:"setAutoplayAllowed",value:function(e){O=e}},{key:"getAutoplayAllowed",value:function(){return O}},{key:"isFirefox",value:function(){return l.test(this.userAgent())}},{key:"isChromeIos",value:function(){return c.test(navigator.userAgent)}},{key:"parseFlashVersion",value:function(e){return e=e.match(p),e.slice(0,3).join(".")}},{key:"userAgent",value:function(){return navigator.userAgent}},{key:"getBrowserVersion",value:function(e,t){var r=t.exec(e);return r?{major:parseInt(r[1],10)||0,minor:parseInt(r[3],10)||0,patch:parseInt(r[5],10)||0}:{major:0,minor:0,patch:0}}}]),e}();r.default=S},{}],61:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=/([^?=&]+)(=([^&]*))?/g,a=function(){function e(){n(this,e)}return i(e,null,[{key:"toQueryString",value:function(e){return Object.keys(e).reduce(function(t,r,n){return""+t+(n>0?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(e[r])},"")}},{key:"parseQueryString",value:function(e){if(!e||"string"!=typeof e)return{};var t={};return e.replace(o,function(e,r,n,i){var o=decodeURIComponent(r),a=void 0!==i?decodeURIComponent(i).replace("+"," "):void 0;return t.hasOwnProperty(o)?Array.isArray(t[o])?t[o].push(a):void(t[o]=[t[o],a]):void(t[o]=a)}),Object.freeze(t)}}]),e}();r.default=a},{}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f=e("log"),d=n(f),p=new d.default("ResizeMonitor"),h=/\d+/g,y="data-breakpoints",v=["onResize","monitor"],b="resize",g=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.el_=e,r.monitorId_=null,v.forEach(function(e){r[e]=r[e].bind(r)}),r.width=null,r.wBreakpoints_=[],r.setupBreakpoints(),r.monitor(),r}return a(t,e),s(t,[{key:"setupBreakpoints",value:function(){var e=this.el_.getAttribute(y);if(e){var t=e.match(h)||[];t=t.map(function(e){return parseFloat(e)}),this.wBreakpoints_=this.wBreakpoints_.concat(t).sort()}}},{key:"getMinWidth",value:function(e){for(var t=this.wBreakpoints_.length-1;0<=t;t--){var r=this.wBreakpoints_[t];if(e>=r)return r}return 0}},{key:"monitor",value:function(){var e=this;this.monitorId_=window.requestAnimationFrame(function(){var t=e.el_.clientWidth;if(e.width!==t){var r=e.getMinWidth(t);e.width=t,e.el_.setAttribute("min-width",r),e.onResize()}e.monitor()})}},{key:"stopMonitoring",value:function(){window.cancelAnimationFrame(this.monitorId_),this.monitorId_=null}},{key:"onResize",value:function(){try{var e=this.el_.getBoundingClientRect();this.trigger(b,{dimensions:e})}catch(e){p.error("Unable to calculate element bounds")}}},{key:"dispose",value:function(){this.el_=this.width=this.wBreakpoints_=null,this.stopMonitoring(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=g},{"./event-target":58,log:"log"}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=document.createElement("link");return e.setAttribute("data-version",a.version),e.setAttribute("id",h),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e}function o(){return Boolean(document.getElementById(h))}Object.defineProperty(r,"__esModule",{value:!0});var a=e("bvp-shims"),s=e("log"),u=n(s),l=e("load-timer"),c=n(l),f=e("error-report"),d=n(f),p=new u.default("StyleInjector"),h="_bvpStyle",y="Link could not be loaded",v="error",b="complete",g={inject:function(e,t){var r=document.getElementsByTagName("head")[0];return o()?Promise.resolve():new Promise(function(n,o){c.default.trackLoadStart(t,c.default.loadTypes.CSS_FILE,e);var a=i();void 0!==a.onreadystatechange?a.onreadystatechange=function(){if(b===this.readyState){var r="hidden"===this.currentStyle.visibility;r?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Error loading "+e),o(y)),a.onreadystatechange=a=null}}:a.onload=a.onerror=function(r){v===r.type?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Could not load style "+e),o(y)):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()),a.onload=a.onerror=a=null},a.href=e,r.appendChild(a)})}};r.default=g},{"bvp-shims":"bvp-shims","error-report":"error-report","load-timer":"load-timer",log:"log"}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return Object.prototype.toString.call(e)}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("lodash.clonedeep"),l=n(u),c="object",f="[object Object]",d="[object Array]",p="[object String]",h="[object Date]",y=function(){function e(){i(this,e)}return s(e,null,[{key:"isArray",value:function(e){return o(e)===d}},{key:"isObject",value:function(e){return e&&("undefined"==typeof e?"undefined":a(e))===c}},{key:"isPlainObject",value:function(e){return o(e)===f}},{key:"isString",value:function(e){return o(e)===p}},{key:"isDate",value:function(e){return o(e)===h}},{key:"isEmptyObject",value:function(t){if(!e.isPlainObject(t))return!0;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}},{key:"deepMerge",value:function(e,t){if(!e)return JSON.parse(JSON.stringify(t));if(!t)return JSON.parse(JSON.stringify(e));var r=(0,l.default)(e);e.streams&&(r.streams=e.streams);for(var n in t)t.hasOwnProperty(n)&&(n in r&&"object"===a(r[n])?r[n]=this.deepMerge(r[n],t[n]):r[n]=t[n]);return r}},{key:"filterEmptyValues",value:function(t){return e.isPlainObject(t)?Object.keys(t).reduce(function(r,n){var i=t[n];return e.isString(i)?""!==i.trim()&&(r[n]=i):"boolean"==typeof i||"number"==typeof i?r[n]=i:i&&(r[n]=i),r},{}):t}}]),e}();r.default=y},{"lodash.clonedeep":30}],65:[function(e,t,r){"use strict";!function(){return"function"!=typeof Array.isArray&&void(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}()},{}],66:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("function"==typeof window.CustomEvent)return!1;var e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};n(this,e);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),i};e.prototype=window.Event.prototype,window.CustomEvent=e}()},{}],67:[function(e,t,r){"use strict";e("./symbol"),e("./array/is-array"),e("./object/assign"),e("./promise"),e("whatwg-fetch"),e("./request-animation-frame"),e("./custom-event"),e("./url")},{"./array/is-array":65,"./custom-event":66,"./object/assign":68,"./promise":69,"./request-animation-frame":70,"./symbol":71,"./url":73,"whatwg-fetch":35}],68:[function(e,t,r){"use strict";e("es6-object-assign").polyfill()},{"es6-object-assign":22}],69:[function(e,t,r){"use strict";e("es6-promise").polyfill()},{"es6-promise":23}],70:[function(e,t,r){"use strict";!function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),n=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+n)},n);return e=r+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},{}],71:[function(e,t,r){"use strict";e("es6-symbol/implement")},{"es6-symbol/implement":24}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../js/utils/query-string"),s=n(a),u=function(){function e(t){i(this,e),this.params=s.default.parseQueryString(t)}return o(e,[{key:"get",value:function(e){if(this.has(e))return Array.isArray(this.params[e])?this.params[e][0]:this.params[e]}},{key:"getAll",value:function(e){return this.has(e)?Array.isArray(this.params[e])?this.params[e]:[this.params[e]]:[]}},{key:"has",value:function(e){return this.params.hasOwnProperty(e)}}]),e}();r.default=u},{"../js/utils/query-string":61}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("./url-search-params"),a=n(o);!function(){if("function"==typeof window.URL&&window.URL.length>0)return!1;var e=function e(t){i(this,e);var r=document.createElement("a");r.href=t;var n=r,o=n.protocol,s=n.hostname,u=n.port,l=n.pathname,c=n.search,f=n.hash,d=n.host;return r=null,Object.freeze({protocol:o,hostname:s,port:u,pathname:l,search:c,hash:f,host:d,searchParams:new a.default(c)})};window.URL&&window.URL.createObjectURL&&(e.createObjectURL=window.URL.createObjectURL),window.URL&&window.URL.revokeObjectURL&&(e.revokeObjectURL=window.URL.revokeObjectURL),window.URL=e}()},{"./url-search-params":72}],"bvp-constant":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRITON_PROVIDER_NAME="TRITON",r.MPEG_STREAM_TYPE="application/x-mpegURL",r.CURRENT_STREAM_NOT_FOUND="error_current_stream_not_found",r.FLASH_TECH_NAME="Flash",r.REGEX_FOR_KRUX=/(ksg)=(\w+)/},{}],"bvp-experiment":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("bb.experiment"),i=new n({});r.default=i},{"bb.experiment":3}],"bvp-shims":[function(e,t,r){"use strict";t.exports={version:"v0.11.103",assetRoot:"cdn.gotraffic.net/projector/v0.11.103",latestRoot:"cdn.gotraffic.net/projector/latest"}},{}],"error-report":[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.reduce(function(e,t){return e+" "+o(t)},"").trim()}function o(e){return e&&e.message?e.message:String(e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=window.BVP_GTM,u=function(){function e(){n(this,e)}return a(e,null,[{key:"recordGenericError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=i(r);e.error.apply(e,r),s.trackError(s.errorTypes.GENERIC,e.label+": "+o)}},{key:"recordHLSError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=i(r);e.error.apply(e,r),s.trackError(s.errorTypes.HLS,e.label+": "+o)}},{key:"recordLoadError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var a=i(n);e.error.apply(e,n),s.trackError(s.errorTypes.LOAD,e.label+": "+a,t)}},{key:"recordAdError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var a=i(n);e.error.apply(e,n),s.trackError(s.errorTypes.AD,e.label+": "+a,t)}}]),e}();r.default=u},{}],"load-timer":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){y={},v={},b={}}function a(e){return v[e]}Object.defineProperty(r,"__esModule",{value:!0}),r.getInitTime=r.reset=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("log"),l=n(u),c=e("error-report"),f=n(c),d=new l.default("LoadTimer"),p={PLAYER_INIT:"playerinit",APP_BUNDLE:"appbundle",VENDOR_BUNDLE:"vendorbundle",TRITON_ID_SYNC:"tritonidsync",TRITON_PROVISION_API:"tritonprovisionapi",CSS_FILE:"cssfile",IMA_SDK:"imasdk",CONFIG:"config",CEDEXIS:"cedexis",PRE_ROLL:"preroll",BMMR:"bmmr",LOTAME:"lotame"},h={COMPLETE:"COMPLETE",ERROR:"ERROR",INVALID_COMPLETE:"INVALID_COMPLETE",INVALID_ERROR:"INVALID_ERROR"},y={},v={},b={},g=function(){function e(){i(this,e)}return s(e,null,[{key:"setEnabled",value:function(e,t){b[e]=t}},{key:"getEnabled",value:function(e){return!!b[e]}},{key:"trackLoadStart",value:function(e,t,r){if(b[e]){var n=Date.now();if(t===p.PLAYER_INIT&&(y[e]&&f.default.recordGenericError(d,"Attempting to track a second load for "+e+" after a load for this player has already been tracked"),y[e]={},v[e]=n),y[e]||(f.default.recordGenericError(d,"Attempting to track a "+t+" start for "+e+" before an init time has been set"),y[e]={},v[e]=n),y[e][t]){var i=y[e][t].loadStatus?"Attempting to track load start for "+t+" on "+e+" after the load has completed":"Attempting to track load start for "+t+" on "+e+" after a load start exists";return void f.default.recordGenericError(d,i)}y[e][t]={startDeltaTime:n-v[e],startTime:n,url:r}}}},{key:"trackLoadComplete",value:function(e,t,r){if(b[e]){y[e]&&y[e][t]||(f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has not been started"),y[e]||(y[e]={}),y[e][t]={startDeltaTime:0,startTime:v[e],url:"unknown"},r=r==h.COMPLETE?h.INVALID_COMPLETE:h.INVALID_ERROR),y[e][t].loadStatus&&f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has already been completed");var n=Date.now();Object.assign(y[e][t],{endDeltaTime:n-v[e],duration:n-y[e][t].startTime,endTime:n,loadStatus:r})}}},{key:"getLoadTimes",value:function(e){return y[e]}}]),e}();Object.defineProperties(g,{loadTypes:{value:p},loadStatus:{value:h}}),r.default=g,r.reset=o,r.getInitTime=a},{"error-report":"error-report",log:"log"}],log:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={1:"error",2:"warn",3:"info",4:"debug",5:"trace"},a=0,s=Symbol("log"),u=Symbol("lastLogLevel"),l={getConsole:function(){return console}},c={TRACE:5,DEBUG:4,INFO:3,WARN:2,ERROR:1},f={LOG_LEVELS:c,minLogLevel:0,useTimestamp:!1,reporter:l},d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),!t)throw new Error("Logger label must be set");this.label=t,this.logConfig=Object.assign(f,r),this[u]=this.logConfig.minLogLevel}return i(e,[{key:s,value:function(e,t){if(e<=this.logConfig.minLogLevel){var r=this.logConfig.reporter.getConsole(),n=r[o[e]]||r.log,i=["[BVP] "+this.label+":"];this.logConfig.useTimestamp&&i.push(Date.now()),n.apply(r,i.concat(Array.prototype.slice.call(t)))}}},{key:"setMinLogLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.logConfig.minLogLevel=e}},{key:"enable",value:function(){this.setMinLogLevel(this[u])}},{key:"disable",value:function(){this[u]=this.logConfig.minLogLevel,this.setMinLogLevel(a)}},{key:"trace",value:function(){this[s](c.TRACE,arguments)}},{key:"debug",value:function(){this[s](c.DEBUG,arguments)}},{key:"info",value:function(){this[s](c.INFO,arguments)}},{key:"warn",value:function(){this[s](c.WARN,arguments)}},{key:"error",value:function(){this[s](c.ERROR,arguments)}}],[{key:"getLogLevels",value:function(){return c}}]),e}();r.default=d},{}],resources:[function(e,t,r){"use strict";t.exports={APP_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.103/app.js",VENDOR_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.103/vendor.js",APP_CSS:"//cdn.gotraffic.net/projector/v0.11.103/bvp.css",CONFIG_OVERWRITES:"//cdn.gotraffic.net/projector/latest/assets/config/config.min.json?v=1",SWF_FILE_NAME_INSIGHTS:"//cdn.gotraffic.net/projector/v0.11.103/BloombergInsightsPlayer.swf",SKIN_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.103/skin.png",BUFFERING_ANIMATION_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.103/assets/images/loading_spinner.gif",PERSONALIZATION_API:"//personalization.bloomberg.com",TRITON_TAG:"ttag=device%3Aweb",YOUBORA_ACCOUNT:"bloomberg",GEOIP_API:"//location.bloomberg.com/public/query",TRIGR_API:"//www.bloomberg.com/trigrservice",VOD_MIDROLL_ENABLED:"true"}},{}],"retry-controller":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),s=n(a),u=1e3,l=2e3,c=new s.default("RetryController"),f=["retry","resetRetryDelay","dispose"],d=function(){function e(t){var r=this,n=t.name,o=t.tryCallback,a=t.cleanupCallback,s=t.maxRetryDelay;i(this,e),this.name=n,this.tryCallback=o,this.cleanupCallback=a,this.maxRetryDelay=s,this.retryDelay=0,this.retryTimer=null,f.forEach(function(e){return r[e]=r[e].bind(r)})}return o(e,[{key:"resetRetryDelay",value:function(){this.retryDelay<u+l||(c.debug(this.name+" resetting retry interval"),this.retryDelay=this._getInitialRetryDelay())}},{key:"shouldRetry",value:function(){return this.retryDelay<=this.maxRetryDelay}},{key:"retry",value:function(){var e=this;if(!this.shouldRetry()){var t="("+this.name+") retry maxRetryDelay ("+this.maxRetryDelay+") reached. Giving up. "+this.retryDelay;return c.debug(t),Promise.reject(t)}return this._cleanup(),new Promise(function(t){e.retryTimer=setTimeout(function(){c.debug("("+e.name+") retrying..."),e.retryTimer=null,t(e.tryCallback())},e.retryDelay),c.debug("("+e.name+") retrying in "+e.retryDelay+"ms"),e.retryDelay=e.retryDelay>0?2*e.retryDelay:e._getInitialRetryDelay()})}},{key:"dispose",value:function(){this._cleanup()}},{key:"_cleanup",value:function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null),this.cleanupCallback&&this.cleanupCallback()}},{key:"_getInitialRetryDelay",value:function(){return Math.random()*l+u}}]),e}();r.default=d},{log:"log"}],"script-injector":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("load-timer"),s=n(a),u=e("log"),l=n(u),c=e("error-report"),f=n(c),d=Array.prototype.slice,p="error",h="loaded",y=new l.default("ScriptInjector"),v=/^http(.*)$/,b=void 0,g=function(){function e(){i(this,e),this.requestQueue={},this.documentScripts=e.getDocumentScripts()}return o(e,[{key:"isLoaded",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.documentScripts[r])}},{key:"isRequested",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.requestQueue[r])}},{key:"inject",value:function(t,r,n){var i=this,o=e.generateScriptKey(t),a=document.querySelector("body");return this.isRequested(t)?this.requestQueue[o]:this.isLoaded(t)?Promise.resolve():(this.requestQueue[o]=e.injectScript(t,a,r,n).then(function(){i.documentScripts[o]=!0,i.requestQueue[o]=null}),this.requestQueue[o])}}],[{key:"getInstance",value:function(){return b||(b=new e),b}},{key:"getDocumentScripts",value:function(){return d.call(document.scripts).reduce(function(t,r){if(r.src){var n=e.generateScriptKey(r.src);t.hasOwnProperty(n)&&y.warn("Duplicate script found: "+r.src),t[r.src]=!0}return t},{})}},{key:"generateScriptKey",value:function(e){v.test(e)||(e=location.protocol+e);var t=new URL(e),r=t.pathname.split("/").slice(-1)[0];return t.host+":"+r}},{key:"injectScript",value:function(e,t,r,n){var i=document.createElement("script");return i.src=e,i.async=!0,new Promise(function(o,a){s.default.trackLoadStart(r,n,e),void 0!==i.onreadystatechange?i.onreadystatechange=function(){h===this.readyState&&(s.default.trackLoadComplete(r,n,s.default.loadStatus.COMPLETE),o(),i.onreadystatechange=i=null)}:i.onload=i.onerror=function(u){return u.type===p?(s.default.trackLoadComplete(r,n,s.default.loadStatus.ERROR),f.default.recordLoadError(y,e,"Script could not be loaded",u),a("Script could not be loaded: "+e),t.removeChild(i),void(i.onload=i.onerror=i=null)):(s.default.trackLoadComplete(r,n,s.default.loadStatus.COMPLETE),o(e),void(i.onload=i.onerror=i=null))},t.appendChild(i)})}}]),e}();r.default=g},{"error-report":"error-report","load-timer":"load-timer",log:"log"}],"triton-stream-provider":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){
for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("script-injector"),s=n(a),u=e("uuid/v4"),l=n(u),c=e("retry-controller"),f=n(c),d=e("bvp-constant"),p=e("load-timer"),h=n(p),y=e("error-report"),v=n(y),b=e("log"),g=n(b),m=e("resources"),_=n(m),w=new g.default("TritonStreamProvider"),E=s.default.getInstance(),O="https://playerservices.live.streamtheworld.com/api/idsync.js",S="https://playerservices.streamtheworld.com/api/livestream",P={mode:"cors",credentials:"same-origin",cache:"no-cache"},A=3e4,T=function(){function e(){i(this,e)}return o(e,null,[{key:"syncAndFetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,i=e.mount,o=e.stationId;return this._syncIds(o,t).then(function(){return r.fetchStreamInfo({apiVersion:n,mount:i},t)})}},{key:"fetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,i=e.mount,o=S+"?transports=hls&version="+n+"&mount="+i;return new Promise(function(e,n){var a=new f.default({name:"Provision Request",tryCallback:function(){r._fetchStreamMetadata(o,i,t).then(function(t){a.dispose(),e(t)},function(e){return a.shouldRetry()?void a.retry():(w.debug("Maximum retry delay reached. Giving up."),a.dispose(),n(e))})},maxRetryDelay:A});a.retry()})}},{key:"_fetchStreamMetadata",value:function(e,t,r){var n=this;return h.default.trackLoadStart(r,h.default.loadTypes.TRITON_PROVISION_API,e),fetch(e,P).then(function(e){if(!e.ok)throw new Error("Bad response from Triton provision API: "+e.status);return h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.COMPLETE),e.text().then(function(e){var r=window.xml.xmlToJSON(e);return n._buildStreamInfo(r,t)})}).catch(function(t){throw v.default.recordLoadError(w,e,"Unable to load:",t),h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.ERROR),t})}},{key:"_generateSidebandMetadataId",value:function(){return(0,l.default)()}},{key:"_syncIds",value:function(e,t){return E.inject(O+"?stationId="+e,t,h.default.loadTypes.TRITON_ID_SYNC)}},{key:"_buildStreamInfo",value:function(e,t){var r=this,n=e.live_stream_config.mountpoints.mountpoint,i=n.transports.transport["@mountSuffix"],o=n.metadata["sse-sideband"]["@metadataSuffix"],a=n.servers.server.map(function(e){return e.ip.Text}),s=_.default.TRITON_TAG?"&"+_.default.TRITON_TAG:"",u=a.map(function(e){var n=r._generateSidebandMetadataId();return{url:"https://"+e+"/"+t+i+"?sbmid="+n+s,sbmUrl:"https://"+e+"/"+t+o+"?sbmid="+n,type:d.MPEG_STREAM_TYPE}});return u}}]),e}();r.default=T},{"bvp-constant":"bvp-constant","error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","retry-controller":"retry-controller","script-injector":"script-injector","uuid/v4":34}]},{},[67,36]);